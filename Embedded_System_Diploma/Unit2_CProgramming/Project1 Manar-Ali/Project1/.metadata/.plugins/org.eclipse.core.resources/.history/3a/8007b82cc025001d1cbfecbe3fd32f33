/*
 * Project1.c
 *
 *  Created on: Aug 24, 2022
 *      Author: Rabbit
 */


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define WITH_ENGINE_TEMP_CONTROLLER 1

int speed =0;
int etemperature =0, rtemperature=0;
char AC[4]="OFF";
char controller_state[4]="OFF";
char engine_state[4]="OFF";
int y;

void current_state(int y){
	printf("**Current Vehicle State:\n");
	printf("Engine State : %s\n",engine_state);
	printf("AC : %s\n",AC);
	printf("Vehicle speed: %d km/hr \n",speed);
	printf("Current Room Temperature: %d\n",rtemperature);
#if(WITH_ENGINE_TEMP_CONTROLLER)
	printf("Current Engine Temperature Controller State: %s\n",controller_state);
	printf("Engine Temperature: %d\n\n",etemperature);
#endif
}

void firstList(char input1)
{

	if (input1=='a'){
		printf("Turn on the vehicle engine\n\n");

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n");
	}
	else if(input1=='b'){
		printf("Turn off the vehicle engine\n\n");

		printf("a. Turn on the vehicle engine\n");
		printf("b. Turn off the vehicle engine\n");
		printf("c. Quit the system\n\n");
	}
	else if(input1=='c'){
		printf("Quit the system\n");
		exit(0);

	}
}
// if the input is b (turn off the vehicle engine)
void second_choice(char input2)
{
	if (input2=='a'){
		printf(" Turn on the vehicle engine\n");

	}
	else if(input2=='b'){
		printf("Turn off the vehicle engine\n");
	}
	else if(input2=='c'){
		printf("Quit the system\n");
		exit(0);

	}

}
void third_choice(char input3)
{
	char x;
	if (input3=='a'){
		printf("a. Turn on the vehicle engine\n");
		printf("b.Turn off the vehicle engine\n");
		printf("c.Quit the system\n");
	}
	scanf(" %c", &x);
	firstList(x);

}

void fourth_choice(char input4)
{

	if(input4=='a'){
		printf("Turn off the engine\n");
	}
	else if(input4=='b'){
		printf("enter the required color\n");

	}
	else if(input4=='c'){
		printf("input the room temperature\n");
	}
#if(WITH_ENGINE_TEMP_CONTROLLER)
	else if(input4=='d'){
		printf("input the engine temperature\n");
	}
#endif
}

void traffic_light(char input5)
{
	if(input5 =='g'){
		speed =100;

		printf("Vehicle speed: %d km/hr \n",speed);
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n");


	}
	else if (input5=='o'){
		speed=30;

		printf("Vehicle speed: %d km/hr \n",speed);
		printf("Room Temperature: %d\n",rtemperature*((5/4)+1));

#if(WITH_ENGINE_TEMP_CONTROLLER)
		printf("Engine Temperatue Controller State: %s\n",controller_state);
		printf("Engine Temperature: %d\n\n",etemperature*((5/4)+1));
#endif
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n");


	}
	else if (input5=='r'){
		speed=0;

		printf("Vehicle speed: 0 km/hr \n\n");
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n");


	}
}
void room_temperature(int temp1)
{
	if(temp1<10){
		rtemperature=20;

		strcpy(AC,"ON");

		printf("turn AC %s\n",AC);
		printf("Room Temperature: %d\n\n",rtemperature);
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n\n");

	}
	else if (temp1>30){
		rtemperature=20;

		strcpy(AC,"ON");
		printf("turn AC %s\n",AC);
		printf("Room Temperature: %d\n\n",rtemperature);
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n\n");

	}
	else{

		strcpy(AC,"OFF");
		printf("turn AC %s\n",AC);
		printf("Room Temperature: %d\n",rtemperature);
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n\n");


	}
}
void engine_temperature(int temp2)
{
#if(WITH_ENGINE_TEMP_CONTROLLER)
	if(temp2<100){
		etemperature=125;

		strcpy(controller_state,"ON");
		printf("Engine Temperatue Controller State: %s\n",controller_state);
		printf("Engine Temperature: %d\n\n",etemperature);
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n\n");

	}
	else if(temp2>150){
		etemperature=125;

		strcpy(controller_state,"ON");
		printf("Engine Temperatue Controller State: %s\n",controller_state);
		printf("Engine Temperature: %d\n\n",etemperature);
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n\n");

	}
	else{

		strcpy(controller_state,"OFF");
		printf("Engine Temperatue Controller State: %s\n",controller_state);
		printf("Engine Temperature: %d\n\n",etemperature);
		current_state(y);

		printf("a. Turn off the engine\n");
		printf("b. Set the traffic light color\n");
		printf("c. Set the room temperature (Temperature Sensor)\n");
		printf("d. Set the engine temperature (Engine Temperature Sensor)\n\n");


	}
#endif
}

int main()
{
	setvbuf(stdout , NULL , _IONBF , 0);

	char input1,input2,color,temp;


	printf("a. Turn on the vehicle engine\n");
	printf("b. Turn off the vehicle engine\n");
	printf("c. Quit the system\n\n");

	scanf(" %c",&input1);
	firstList(input1);
	scanf(" %c",&input2);

	if(input1=='b'){
	second_choice(input2);

	}

	while(1){
	if(input1=='a'&& input2=='a'){
	third_choice(input2);
	}

	if(input1=='a'&&input2=='b'){
		fourth_choice(input2);
	}
	if(input1=='a'&& input2=='b'){
		scanf(" %c", &color);
		traffic_light(color);

	}
	if(input1=='a'&& input2=='c'){
		printf("enter the temperature\n");
		scanf(" %c",&temp);
		room_temperature(temp);
	}
	if(input1=='a'&& input2=='d'){
		printf("enter the temperature\n");
		scanf(" %c",&temp);
		engine_temperature(temp);
		}

	scanf(" %c",&input2);
	}
	return 0;
}
